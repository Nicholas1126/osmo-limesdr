<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.11"/>
<title>libosmo-netif: Osmocom Multiplex Protocol</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript">
  $(document).ready(initResizable);
  $(window).load(resizeHeight);
</script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
  $(document).ready(function() { init_search(); });
</script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">libosmo-netif
   &#160;<span id="projectnumber">0.4.0.25-e380</span>
   </div>
   <div id="projectbrief">Osmocom network interface library</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.11 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li class="current"><a href="modules.html"><span>Modules</span></a></li>
      <li><a href="annotated.html"><span>Data&#160;Structures</span></a></li>
      <li><a href="files.html"><span>Files</span></a></li>
      <li>
        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
          </span>
        </div>
      </li>
    </ul>
  </div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
$(document).ready(function(){initNavTree('group__osmux.html','');});
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="summary">
<a href="#files">Files</a> &#124;
<a href="#nested-classes">Data Structures</a> &#124;
<a href="#define-members">Macros</a> &#124;
<a href="#func-members">Functions</a> &#124;
<a href="#var-members">Variables</a>  </div>
  <div class="headertitle">
<div class="title">Osmocom Multiplex Protocol</div>  </div>
</div><!--header-->
<div class="contents">
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="files"></a>
Files</h2></td></tr>
<tr class="memitem:osmux_8h"><td class="memItemLeft" align="right" valign="top">file &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="osmux_8h.html">osmux.h</a></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:osmux_8c"><td class="memItemLeft" align="right" valign="top">file &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="osmux_8c.html">osmux.c</a></td></tr>
<tr class="memdesc:osmux_8c"><td class="mdescLeft">&#160;</td><td class="mdescRight">Osmocom multiplex protocol helpers. <br /></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="nested-classes"></a>
Data Structures</h2></td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">struct &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="structosmux__hdr.html">osmux_hdr</a></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">struct &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="structosmux__in__handle.html">osmux_in_handle</a></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">struct &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="structosmux__out__handle.html">osmux_out_handle</a></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">struct &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="structosmux__batch.html">osmux_batch</a></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">struct &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="structosmux__circuit.html">osmux_circuit</a></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">struct &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="structosmux__input__state.html">osmux_input_state</a></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">struct &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="structosmux__tx__handle.html">osmux_tx_handle</a></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="define-members"></a>
Macros</h2></td></tr>
<tr class="memitem:ga56541848fbbf5c529d7983685cbe1222"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="ga56541848fbbf5c529d7983685cbe1222"></a>
#define&#160;</td><td class="memItemRight" valign="bottom"><b>OSMUX_FT_SIGNAL</b>&#160;&#160;&#160;0</td></tr>
<tr class="separator:ga56541848fbbf5c529d7983685cbe1222"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gae48ff00bdb503143c58d74c08e3ea4c6"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="gae48ff00bdb503143c58d74c08e3ea4c6"></a>
#define&#160;</td><td class="memItemRight" valign="bottom"><b>OSMUX_FT_VOICE_AMR</b>&#160;&#160;&#160;1</td></tr>
<tr class="separator:gae48ff00bdb503143c58d74c08e3ea4c6"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga08d783f0644a0f44c9e39bb851a0d2a9"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="ga08d783f0644a0f44c9e39bb851a0d2a9"></a>
#define&#160;</td><td class="memItemRight" valign="bottom"><b>OSMUX_FT_DUMMY</b>&#160;&#160;&#160;2</td></tr>
<tr class="separator:ga08d783f0644a0f44c9e39bb851a0d2a9"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga97865ddcdfb9cf8d39653cf704e154c4"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="ga97865ddcdfb9cf8d39653cf704e154c4"></a>
#define&#160;</td><td class="memItemRight" valign="bottom"><b>OSMUX_MAX_CONCURRENT_CALLS</b>&#160;&#160;&#160;8</td></tr>
<tr class="separator:ga97865ddcdfb9cf8d39653cf704e154c4"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gafcc9ef25a29d641a31523dfeb627d20b"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="gafcc9ef25a29d641a31523dfeb627d20b"></a>
#define&#160;</td><td class="memItemRight" valign="bottom"><b>OSMUX_BATCH_DEFAULT_MAX</b>&#160;&#160;&#160;1472</td></tr>
<tr class="separator:gafcc9ef25a29d641a31523dfeb627d20b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gaf5909a93287ea334985b9d1735ad0b60"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="gaf5909a93287ea334985b9d1735ad0b60"></a>
#define&#160;</td><td class="memItemRight" valign="bottom"><b>DELTA_RTP_MSG</b>&#160;&#160;&#160;20000</td></tr>
<tr class="separator:gaf5909a93287ea334985b9d1735ad0b60"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gaeac1d5817fbc8473765723ddad171dc5"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="gaeac1d5817fbc8473765723ddad171dc5"></a>
#define&#160;</td><td class="memItemRight" valign="bottom"><b>DELTA_RTP_TIMESTAMP</b>&#160;&#160;&#160;160</td></tr>
<tr class="separator:gaeac1d5817fbc8473765723ddad171dc5"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga6aef25db0cf5336a997cae7c402e55be"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><b>SNPRINTF_BUFFER_SIZE</b>(ret,  remain,  offset)</td></tr>
<tr class="separator:ga6aef25db0cf5336a997cae7c402e55be"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:gab731e55b448e102a7f0937d575442929"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="gab731e55b448e102a7f0937d575442929"></a>
struct <a class="el" href="structosmux__hdr.html">osmux_hdr</a>&#160;</td><td class="memItemRight" valign="bottom"><b>__attribute__</b> ((packed))</td></tr>
<tr class="separator:gab731e55b448e102a7f0937d575442929"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga6d16616cb76c2eb9db17a4cee638f80c"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="ga6d16616cb76c2eb9db17a4cee638f80c"></a>
static uint8_t *&#160;</td><td class="memItemRight" valign="bottom"><b>osmux_get_payload</b> (struct <a class="el" href="structosmux__hdr.html">osmux_hdr</a> *osmuxh)</td></tr>
<tr class="separator:ga6d16616cb76c2eb9db17a4cee638f80c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gaf654e092ca97dd764f59905a2ed21650"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__osmux.html#gaf654e092ca97dd764f59905a2ed21650">osmux_snprintf</a> (char *buf, size_t size, struct msgb *msg)</td></tr>
<tr class="separator:gaf654e092ca97dd764f59905a2ed21650"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga2a993ac6099e6ffc086c61b6ac81e43f"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="ga2a993ac6099e6ffc086c61b6ac81e43f"></a>
void&#160;</td><td class="memItemRight" valign="bottom"><b>osmux_xfrm_input_init</b> (struct <a class="el" href="structosmux__in__handle.html">osmux_in_handle</a> *h)</td></tr>
<tr class="separator:ga2a993ac6099e6ffc086c61b6ac81e43f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gafade2203059a2eaad659b15b5245a075"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="gafade2203059a2eaad659b15b5245a075"></a>
void&#160;</td><td class="memItemRight" valign="bottom"><b>osmux_xfrm_input_fini</b> (struct <a class="el" href="structosmux__in__handle.html">osmux_in_handle</a> *h)</td></tr>
<tr class="separator:gafade2203059a2eaad659b15b5245a075"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga8976891414ad18103efb8829b4b2844a"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="ga8976891414ad18103efb8829b4b2844a"></a>
int&#160;</td><td class="memItemRight" valign="bottom"><b>osmux_xfrm_input_open_circuit</b> (struct <a class="el" href="structosmux__in__handle.html">osmux_in_handle</a> *h, int ccid, int dummy)</td></tr>
<tr class="separator:ga8976891414ad18103efb8829b4b2844a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga2c12c883c9dd7abd80b47802ef991b32"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="ga2c12c883c9dd7abd80b47802ef991b32"></a>
void&#160;</td><td class="memItemRight" valign="bottom"><b>osmux_xfrm_input_close_circuit</b> (struct <a class="el" href="structosmux__in__handle.html">osmux_in_handle</a> *h, int ccid)</td></tr>
<tr class="separator:ga2c12c883c9dd7abd80b47802ef991b32"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga9c7d30c0d7d9bc0caf744799d629d4cc"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__osmux.html#ga9c7d30c0d7d9bc0caf744799d629d4cc">osmux_xfrm_input</a> (struct <a class="el" href="structosmux__in__handle.html">osmux_in_handle</a> *h, struct msgb *msg, int ccid)</td></tr>
<tr class="separator:ga9c7d30c0d7d9bc0caf744799d629d4cc"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gafad3a85e58f396db7544ac0138df7974"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="gafad3a85e58f396db7544ac0138df7974"></a>
void&#160;</td><td class="memItemRight" valign="bottom"><b>osmux_xfrm_input_deliver</b> (struct <a class="el" href="structosmux__in__handle.html">osmux_in_handle</a> *h)</td></tr>
<tr class="separator:gafad3a85e58f396db7544ac0138df7974"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gaad1ddab26314d7c91867f203b13c9563"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="gaad1ddab26314d7c91867f203b13c9563"></a>
void&#160;</td><td class="memItemRight" valign="bottom"><b>osmux_xfrm_output_init</b> (struct <a class="el" href="structosmux__out__handle.html">osmux_out_handle</a> *h, uint32_t rtp_ssrc)</td></tr>
<tr class="separator:gaad1ddab26314d7c91867f203b13c9563"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga3936e43e881d0992648937417969ead1"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__osmux.html#ga3936e43e881d0992648937417969ead1">osmux_xfrm_output_set_tx_cb</a> (struct <a class="el" href="structosmux__out__handle.html">osmux_out_handle</a> *h, void(*tx_cb)(struct msgb *msg, void *data), void *data)</td></tr>
<tr class="memdesc:ga3936e43e881d0992648937417969ead1"><td class="mdescLeft">&#160;</td><td class="mdescRight">Set transmission callback to call when a generated RTP packet is to be transmitted.  <a href="#ga3936e43e881d0992648937417969ead1">More...</a><br /></td></tr>
<tr class="separator:ga3936e43e881d0992648937417969ead1"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga6f81282beee813c320ac2a31663c8fa6"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="ga6f81282beee813c320ac2a31663c8fa6"></a>
int&#160;</td><td class="memItemRight" valign="bottom"><b>osmux_xfrm_output</b> (struct <a class="el" href="structosmux__hdr.html">osmux_hdr</a> *osmuxh, struct <a class="el" href="structosmux__out__handle.html">osmux_out_handle</a> *h, struct llist_head *list) OSMO_DEPRECATED(&quot;Use <a class="el" href="group__osmux.html#gafee78ee4522a9caa238301d7b913dfd6">osmux_xfrm_output_sched</a>() instead&quot;)</td></tr>
<tr class="separator:ga6f81282beee813c320ac2a31663c8fa6"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gafee78ee4522a9caa238301d7b913dfd6"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__osmux.html#gafee78ee4522a9caa238301d7b913dfd6">osmux_xfrm_output_sched</a> (struct <a class="el" href="structosmux__out__handle.html">osmux_out_handle</a> *h, struct <a class="el" href="structosmux__hdr.html">osmux_hdr</a> *osmuxh)</td></tr>
<tr class="memdesc:gafee78ee4522a9caa238301d7b913dfd6"><td class="mdescLeft">&#160;</td><td class="mdescRight">Generate RTP packets from osmux frame AMR payload set and schedule them for transmission at appropiate time.  <a href="#gafee78ee4522a9caa238301d7b913dfd6">More...</a><br /></td></tr>
<tr class="separator:gafee78ee4522a9caa238301d7b913dfd6"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gaaac410425f6470396ae9db53ebb8dc44"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__osmux.html#gaaac410425f6470396ae9db53ebb8dc44">osmux_xfrm_output_flush</a> (struct <a class="el" href="structosmux__out__handle.html">osmux_out_handle</a> *h)</td></tr>
<tr class="memdesc:gaaac410425f6470396ae9db53ebb8dc44"><td class="mdescLeft">&#160;</td><td class="mdescRight">Flush all scheduled RTP packets still pending to be transmitted.  <a href="#gaaac410425f6470396ae9db53ebb8dc44">More...</a><br /></td></tr>
<tr class="separator:gaaac410425f6470396ae9db53ebb8dc44"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga613c43d4166a4985718f8e4f7216efcc"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="ga613c43d4166a4985718f8e4f7216efcc"></a>
struct <a class="el" href="structosmux__hdr.html">osmux_hdr</a> *&#160;</td><td class="memItemRight" valign="bottom"><b>osmux_xfrm_output_pull</b> (struct msgb *msg)</td></tr>
<tr class="separator:ga613c43d4166a4985718f8e4f7216efcc"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga8f69252f3c59628d2defa68cb95ed3b5"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="ga8f69252f3c59628d2defa68cb95ed3b5"></a>
void&#160;</td><td class="memItemRight" valign="bottom"><b>osmux_tx_sched</b> (struct llist_head *list, void(*tx_cb)(struct msgb *msg, void *data), void *data) OSMO_DEPRECATED(&quot;Use <a class="el" href="group__osmux.html#ga3936e43e881d0992648937417969ead1">osmux_xfrm_output_set_tx_cb</a>() instead&quot;)</td></tr>
<tr class="separator:ga8f69252f3c59628d2defa68cb95ed3b5"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga7173385a73a58d9e591c89c9ce6f2162"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="ga7173385a73a58d9e591c89c9ce6f2162"></a>
static uint32_t&#160;</td><td class="memItemRight" valign="bottom"><b>osmux_get_payload_len</b> (struct <a class="el" href="structosmux__hdr.html">osmux_hdr</a> *osmuxh)</td></tr>
<tr class="separator:ga7173385a73a58d9e591c89c9ce6f2162"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gaf756352e90aa8ab0e96c0f43f23c36d3"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="gaf756352e90aa8ab0e96c0f43f23c36d3"></a>
static uint32_t&#160;</td><td class="memItemRight" valign="bottom"><b>osmux_ft_dummy_size</b> (uint8_t amr_ft, uint8_t batch_factor)</td></tr>
<tr class="separator:gaf756352e90aa8ab0e96c0f43f23c36d3"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga21f39732f8635545f2171af97297b639"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="ga21f39732f8635545f2171af97297b639"></a>
static struct msgb *&#160;</td><td class="memItemRight" valign="bottom"><b>osmux_rebuild_rtp</b> (struct <a class="el" href="structosmux__out__handle.html">osmux_out_handle</a> *h, struct <a class="el" href="structosmux__hdr.html">osmux_hdr</a> *osmuxh, void *payload, int payload_len, bool first_pkt)</td></tr>
<tr class="separator:ga21f39732f8635545f2171af97297b639"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gafad4414de98f24dcce1c5a7878e652c6"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="gafad4414de98f24dcce1c5a7878e652c6"></a>
static void&#160;</td><td class="memItemRight" valign="bottom"><b>osmux_xfrm_output_trigger</b> (void *data)</td></tr>
<tr class="separator:gafad4414de98f24dcce1c5a7878e652c6"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga53dca1ab2d87a84411f7821471268ccd"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="ga53dca1ab2d87a84411f7821471268ccd"></a>
static int&#160;</td><td class="memItemRight" valign="bottom"><b>osmux_batch_enqueue</b> (struct msgb *msg, struct <a class="el" href="structosmux__circuit.html">osmux_circuit</a> *circuit, uint8_t batch_factor)</td></tr>
<tr class="separator:ga53dca1ab2d87a84411f7821471268ccd"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga8f2ed1b95fb3b0b053a2affdef55af0c"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="ga8f2ed1b95fb3b0b053a2affdef55af0c"></a>
static void&#160;</td><td class="memItemRight" valign="bottom"><b>osmux_batch_dequeue</b> (struct msgb *msg, struct <a class="el" href="structosmux__circuit.html">osmux_circuit</a> *circuit)</td></tr>
<tr class="separator:ga8f2ed1b95fb3b0b053a2affdef55af0c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gae8885fa2c6a40cf4cee4377dc46aeb94"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="gae8885fa2c6a40cf4cee4377dc46aeb94"></a>
static void&#160;</td><td class="memItemRight" valign="bottom"><b>osmux_circuit_del_msgs</b> (struct <a class="el" href="structosmux__batch.html">osmux_batch</a> *batch, struct <a class="el" href="structosmux__circuit.html">osmux_circuit</a> *circuit)</td></tr>
<tr class="separator:gae8885fa2c6a40cf4cee4377dc46aeb94"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga817c50f0b3f136dc138e286325b85398"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="ga817c50f0b3f136dc138e286325b85398"></a>
static int&#160;</td><td class="memItemRight" valign="bottom"><b>osmux_batch_put</b> (struct <a class="el" href="structosmux__batch.html">osmux_batch</a> *batch, struct <a class="el" href="structosmux__input__state.html">osmux_input_state</a> *state)</td></tr>
<tr class="separator:ga817c50f0b3f136dc138e286325b85398"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga45da5daf2d31a73d3cd189dfc5e3e26f"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="ga45da5daf2d31a73d3cd189dfc5e3e26f"></a>
static int&#160;</td><td class="memItemRight" valign="bottom"><b>osmux_xfrm_encode_amr</b> (struct <a class="el" href="structosmux__batch.html">osmux_batch</a> *batch, struct <a class="el" href="structosmux__input__state.html">osmux_input_state</a> *state)</td></tr>
<tr class="separator:ga45da5daf2d31a73d3cd189dfc5e3e26f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga323417cc06a5ed2e805264d462cd1a0b"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="ga323417cc06a5ed2e805264d462cd1a0b"></a>
static void&#160;</td><td class="memItemRight" valign="bottom"><b>osmux_encode_dummy</b> (struct <a class="el" href="structosmux__batch.html">osmux_batch</a> *batch, uint8_t batch_factor, struct <a class="el" href="structosmux__input__state.html">osmux_input_state</a> *state)</td></tr>
<tr class="separator:ga323417cc06a5ed2e805264d462cd1a0b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga63b5729acea7a10988b59c7980ab0fea"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="ga63b5729acea7a10988b59c7980ab0fea"></a>
static struct msgb *&#160;</td><td class="memItemRight" valign="bottom"><b>osmux_build_batch</b> (struct <a class="el" href="structosmux__batch.html">osmux_batch</a> *batch, uint32_t batch_size, uint8_t batch_factor)</td></tr>
<tr class="separator:ga63b5729acea7a10988b59c7980ab0fea"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga0338c55965aa1658a42b7acf1d2e5d34"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="ga0338c55965aa1658a42b7acf1d2e5d34"></a>
static void&#160;</td><td class="memItemRight" valign="bottom"><b>osmux_batch_timer_expired</b> (void *data)</td></tr>
<tr class="separator:ga0338c55965aa1658a42b7acf1d2e5d34"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga00417a6b7d7d35195ef7d4756545d22d"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="ga00417a6b7d7d35195ef7d4756545d22d"></a>
static int&#160;</td><td class="memItemRight" valign="bottom"><b>osmux_rtp_amr_payload_len</b> (struct msgb *msg, struct <a class="el" href="structrtp__hdr.html">rtp_hdr</a> *rtph)</td></tr>
<tr class="separator:ga00417a6b7d7d35195ef7d4756545d22d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gae4e6054eeda8f39a2d764fa08179bb3a"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="gae4e6054eeda8f39a2d764fa08179bb3a"></a>
static void&#160;</td><td class="memItemRight" valign="bottom"><b>osmux_replay_lost_packets</b> (struct <a class="el" href="structosmux__circuit.html">osmux_circuit</a> *circuit, struct <a class="el" href="structrtp__hdr.html">rtp_hdr</a> *cur_rtph, int batch_factor)</td></tr>
<tr class="separator:gae4e6054eeda8f39a2d764fa08179bb3a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga9becda4685cfea6a8ee501fb93803092"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="ga9becda4685cfea6a8ee501fb93803092"></a>
static struct <a class="el" href="structosmux__circuit.html">osmux_circuit</a> *&#160;</td><td class="memItemRight" valign="bottom"><b>osmux_batch_find_circuit</b> (struct <a class="el" href="structosmux__batch.html">osmux_batch</a> *batch, int ccid)</td></tr>
<tr class="separator:ga9becda4685cfea6a8ee501fb93803092"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gaccfb7e95e0b54ed8a3c2a4185a96a9cc"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="gaccfb7e95e0b54ed8a3c2a4185a96a9cc"></a>
static struct <a class="el" href="structosmux__circuit.html">osmux_circuit</a> *&#160;</td><td class="memItemRight" valign="bottom"><b>osmux_batch_add_circuit</b> (struct <a class="el" href="structosmux__batch.html">osmux_batch</a> *batch, int ccid, int dummy, uint8_t batch_factor)</td></tr>
<tr class="separator:gaccfb7e95e0b54ed8a3c2a4185a96a9cc"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga4e06c9952928c96f893002794c24f7f1"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="ga4e06c9952928c96f893002794c24f7f1"></a>
static void&#160;</td><td class="memItemRight" valign="bottom"><b>osmux_batch_del_circuit</b> (struct <a class="el" href="structosmux__batch.html">osmux_batch</a> *batch, struct <a class="el" href="structosmux__circuit.html">osmux_circuit</a> *circuit)</td></tr>
<tr class="separator:ga4e06c9952928c96f893002794c24f7f1"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gaf11c2b30f84dcc858c4da254d2e6f3f9"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="gaf11c2b30f84dcc858c4da254d2e6f3f9"></a>
static int&#160;</td><td class="memItemRight" valign="bottom"><b>osmux_batch_add</b> (struct <a class="el" href="structosmux__batch.html">osmux_batch</a> *batch, uint32_t batch_factor, struct msgb *msg, struct <a class="el" href="structrtp__hdr.html">rtp_hdr</a> *rtph, int ccid)</td></tr>
<tr class="separator:gaf11c2b30f84dcc858c4da254d2e6f3f9"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga5fdcde262e8c6d7827eaddfcdd4cdd97"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="ga5fdcde262e8c6d7827eaddfcdd4cdd97"></a>
static void&#160;</td><td class="memItemRight" valign="bottom"><b>osmux_tx_cb</b> (void *data)</td></tr>
<tr class="separator:ga5fdcde262e8c6d7827eaddfcdd4cdd97"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga0be6ad86f9e1a5a8fe78abadfd937804"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="ga0be6ad86f9e1a5a8fe78abadfd937804"></a>
static void&#160;</td><td class="memItemRight" valign="bottom"><b>osmux_tx</b> (struct msgb *msg, struct timeval *when, void(*tx_cb)(struct msgb *msg, void *data), void *data)</td></tr>
<tr class="separator:ga0be6ad86f9e1a5a8fe78abadfd937804"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gad22fb7955b289918b8b16be80b07e957"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="gad22fb7955b289918b8b16be80b07e957"></a>
static int&#160;</td><td class="memItemRight" valign="bottom"><b>osmux_snprintf_header</b> (char *buf, size_t size, struct <a class="el" href="structosmux__hdr.html">osmux_hdr</a> *osmuxh)</td></tr>
<tr class="separator:gad22fb7955b289918b8b16be80b07e957"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga7e0da74da38893a8823b9247ba66e187"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="ga7e0da74da38893a8823b9247ba66e187"></a>
static int&#160;</td><td class="memItemRight" valign="bottom"><b>osmux_snprintf_payload</b> (char *buf, size_t size, const uint8_t *payload, int payload_len)</td></tr>
<tr class="separator:ga7e0da74da38893a8823b9247ba66e187"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="var-members"></a>
Variables</h2></td></tr>
<tr class="memitem:ga9dd31e4f6a9ad599afbb4600bec665f2"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="ga9dd31e4f6a9ad599afbb4600bec665f2"></a>
struct <a class="el" href="structosmux__in__handle.html">osmux_in_handle</a>&#160;</td><td class="memItemRight" valign="bottom"><b>__attribute__</b></td></tr>
<tr class="separator:ga9dd31e4f6a9ad599afbb4600bec665f2"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga408d4648bd8b85223d46124c5157006d"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="ga408d4648bd8b85223d46124c5157006d"></a>
static void *&#160;</td><td class="memItemRight" valign="bottom"><b>osmux_ctx</b></td></tr>
<tr class="separator:ga408d4648bd8b85223d46124c5157006d"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<p>This code implements a variety of utility functions related to the OSMUX user-plane multiplexing protocol, an efficient alternative to plain UDP/RTP streams for voice transport in back-haul of cellular networks.</p>
<p>For information about the OSMUX protocol design, please see the OSMUX reference manual at <a href="http://ftp.osmocom.org/docs/latest/osmux-reference.pdf">http://ftp.osmocom.org/docs/latest/osmux-reference.pdf</a> </p>
<h2 class="groupheader">Macro Definition Documentation</h2>
<a class="anchor" id="ga6aef25db0cf5336a997cae7c402e55be"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define SNPRINTF_BUFFER_SIZE</td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname">ret, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname">remain, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname">offset&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<b>Value:</b><div class="fragment"><div class="line"><span class="keywordflow">if</span> (ret &lt; 0)                                    \</div><div class="line">                ret = 0;                                \</div><div class="line">        offset += ret;                                  \</div><div class="line">        if (ret &gt; remain)                               \</div><div class="line">                ret = remain;                           \</div><div class="line">        remain -= ret;</div></div><!-- fragment -->
</div>
</div>
<h2 class="groupheader">Function Documentation</h2>
<a class="anchor" id="gaf654e092ca97dd764f59905a2ed21650"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int osmux_snprintf </td>
          <td>(</td>
          <td class="paramtype">char *&#160;</td>
          <td class="paramname"><em>buf</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">size_t&#160;</td>
          <td class="paramname"><em>size</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct msgb *&#160;</td>
          <td class="paramname"><em>msg</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Print osmux header fields and payload from msg into buffer buf. </p><dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[out]</td><td class="paramname">buf</td><td>buffer to store the output into </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">len</td><td>length of buf in bytes </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">msgb</td><td>message buffer containing one or more osmux frames </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>the number of characters printed (excluding the null byte used to end output to strings).</dd></dl>
<p>If the output was truncated due to this limit, then the return value is the number of characters (excluding the terminating null byte) which would have been written to the final string if enough space had been available. </p>

</div>
</div>
<a class="anchor" id="ga9c7d30c0d7d9bc0caf744799d629d4cc"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int osmux_xfrm_input </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structosmux__in__handle.html">osmux_in_handle</a> *&#160;</td>
          <td class="paramname"><em>h</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct msgb *&#160;</td>
          <td class="paramname"><em>msg</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>ccid</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>osmux_xfrm_input - add RTP message to OSmux batch </p><dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">msg</td><td>RTP message that you want to batch into one OSmux message</td></tr>
  </table>
  </dd>
</dl>
<p>If 0 is returned, this indicates that the message has been batched or that an error occured and we have skipped the message. If 1 is returned, you have to invoke osmux_xfrm_input_deliver and try again.</p>
<p>The function takes care of releasing the messages in case of error and when building the batch. </p>

</div>
</div>
<a class="anchor" id="gaaac410425f6470396ae9db53ebb8dc44"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void osmux_xfrm_output_flush </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structosmux__out__handle.html">osmux_out_handle</a> *&#160;</td>
          <td class="paramname"><em>h</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Flush all scheduled RTP packets still pending to be transmitted. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">h</td><td>the osmux out handle to flush</td></tr>
  </table>
  </dd>
</dl>
<p>This function will immediately call the transmit callback for all queued RTP packets, making sure the list ends up empty. It will also stop all internal timers to make sure the <a class="el" href="structosmux__out__handle.html">osmux_out_handle</a> can be dropped or re-used by calling osmux_xfrm_output on it. </p>

</div>
</div>
<a class="anchor" id="gafee78ee4522a9caa238301d7b913dfd6"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int osmux_xfrm_output_sched </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structosmux__out__handle.html">osmux_out_handle</a> *&#160;</td>
          <td class="paramname"><em>h</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structosmux__hdr.html">osmux_hdr</a> *&#160;</td>
          <td class="paramname"><em>osmuxh</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Generate RTP packets from osmux frame AMR payload set and schedule them for transmission at appropiate time. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">h</td><td>the osmux out handle handling a specific CID </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">osmuxh</td><td>Buffer pointing to osmux frame header structure and AMR payload </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>Number of generated RTP packets</dd></dl>
<p>The osmux frame passed to this function must be of the type OSMUX_FT_VOICE_AMR. The generated RTP packets are kept into h's internal list and sent to the callback configured through osmux_xfrm_output_set_tx_cb when are ready to be transmitted according to schedule. </p>

</div>
</div>
<a class="anchor" id="ga3936e43e881d0992648937417969ead1"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void osmux_xfrm_output_set_tx_cb </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structosmux__out__handle.html">osmux_out_handle</a> *&#160;</td>
          <td class="paramname"><em>h</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">void(*)(struct msgb *msg, void *data)&#160;</td>
          <td class="paramname"><em>tx_cb</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">void *&#160;</td>
          <td class="paramname"><em>data</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Set transmission callback to call when a generated RTP packet is to be transmitted. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">h</td><td>the osmux out handle handling a specific CID </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">osmuxh</td><td>Buffer pointing to osmux frame header structure and AMR payload </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>Number of generated RTP packets</dd></dl>
<p>This Function sets the callback called by the interal timer set by osmux_xfrm_out_sched function. </p>

</div>
</div>
</div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="footer">Generated on Wed May 1 2019 23:37:09 for libosmo-netif by
    <a href="http://www.doxygen.org/index.html">
    <img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.8.11 </li>
  </ul>
</div>
</body>
</html>
